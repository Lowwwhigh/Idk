local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create the main screen GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "GhostJabGUI"
screenGui.Parent = playerGui
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Create main frame
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 200, 0, 60)
mainFrame.Position = UDim2.new(0.5, -100, 0.9, -30)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
mainFrame.BackgroundTransparency = 0.2
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- Add corner rounding
local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 12)
uiCorner.Parent = mainFrame

-- Add subtle shadow effect
local uiShadow = Instance.new("UIStroke")
uiShadow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
uiShadow.Color = Color3.fromRGB(60, 60, 80)
uiShadow.Thickness = 2
uiShadow.Transparency = 0.5
uiShadow.Parent = mainFrame

-- Create the Ghost Jab button
local ghostJabButton = Instance.new("TextButton")
ghostJabButton.Name = "GhostJabButton"
ghostJabButton.Size = UDim2.new(0.9, 0, 0.7, 0)
ghostJabButton.Position = UDim2.new(0.05, 0, 0.15, 0)
ghostJabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
ghostJabButton.BackgroundTransparency = 0
ghostJabButton.Text = "GHOST JAB"
ghostJabButton.TextColor3 = Color3.fromRGB(220, 220, 255)
ghostJabButton.TextSize = 16
ghostJabButton.Font = Enum.Font.GothamBold
ghostJabButton.BorderSizePixel = 0
ghostJabButton.Parent = mainFrame
ghostJabButton.ZIndex = 2

-- Add corner rounding to button
local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = ghostJabButton

-- Add glow effect to button
local buttonGlow = Instance.new("UIStroke")
buttonGlow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
buttonGlow.Color = Color3.fromRGB(120, 120, 200)
buttonGlow.Thickness = 2
buttonGlow.Transparency = 0.7
buttonGlow.Parent = ghostJabButton

-- Create cooldown overlay
local cooldownOverlay = Instance.new("Frame")
cooldownOverlay.Name = "CooldownOverlay"
cooldownOverlay.Size = UDim2.new(1, 0, 1, 0)
cooldownOverlay.Position = UDim2.new(0, 0, 0, 0)
cooldownOverlay.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
cooldownOverlay.BackgroundTransparency = 0.7
cooldownOverlay.BorderSizePixel = 0
cooldownOverlay.Visible = false
cooldownOverlay.Parent = ghostJabButton
cooldownOverlay.ZIndex = 3

local overlayCorner = Instance.new("UICorner")
overlayCorner.CornerRadius = UDim.new(0, 8)
overlayCorner.Parent = cooldownOverlay

-- Create usage counter text
local usageText = Instance.new("TextLabel")
usageText.Name = "UsageText"
usageText.Size = UDim2.new(0.9, 0, 0.2, 0)
usageText.Position = UDim2.new(0.05, 0, 0.85, 0)
usageText.BackgroundTransparency = 1
usageText.Text = "Uses: 0/55"
usageText.TextColor3 = Color3.fromRGB(180, 180, 220)
usageText.TextSize = 12
usageText.Font = Enum.Font.Gotham
usageText.TextXAlignment = Enum.TextXAlignment.Right
usageText.Parent = mainFrame

-- Cooldown and usage tracking variables
local lastClickTime = 0
local clickCooldown = 0.2
local minuteUses = 0
local maxMinuteUses = 55
local resetTime = 0

-- Function to fire the remote
local function fireRemote()
    local args = {
        {
            {
                buffer.fromstring("\019\000\000\0009901000103193594770\000")
            },
            "\016"
        }
    }
    
    local dataRemoteEvent = ReplicatedStorage:WaitForChild("BridgeNet2"):WaitForChild("dataRemoteEvent")
    dataRemoteEvent:FireServer(unpack(args))
end

-- Function to update the usage text
local function updateUsageText()
    usageText.Text = "Uses: " .. minuteUses .. "/" .. maxMinuteUses
end

-- Function to reset the minute counter
local function resetMinuteCounter()
    minuteUses = 0
    updateUsageText()
end

-- Button click function
ghostJabButton.MouseButton1Click:Connect(function()
    local currentTime = tick()
    
    -- Check cooldown
    if currentTime - lastClickTime < clickCooldown then
        return
    end
    
    -- Check minute limit
    if minuteUses >= maxMinuteUses then
        if currentTime >= resetTime then
            resetMinuteCounter()
        else
            return
        end
    end
    
    -- Set/reset the minute counter if needed
    if minuteUses == 0 then
        resetTime = currentTime + 60
        delay(60, resetMinuteCounter)
    end
    
    -- Update tracking variables
    lastClickTime = currentTime
    minuteUses = minuteUses + 1
    updateUsageText()
    
    -- Fire the remote
    fireRemote()
    
    -- Visual feedback
    local clickTween = TweenService:Create(
        ghostJabButton,
        TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
        {BackgroundTransparency = 0.3}
    )
    
    local resetTween = TweenService:Create(
        ghostJabButton,
        TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out, 0, false, 0.1),
        {BackgroundTransparency = 0}
    )
    
    clickTween:Play()
    clickTween.Completed:Connect(function()
        resetTween:Play()
    end)
    
    -- Show cooldown overlay
    cooldownOverlay.Size = UDim2.new(1, 0, 1, 0)
    cooldownOverlay.Visible = true
    
    local cooldownTween = TweenService:Create(
        cooldownOverlay,
        TweenInfo.new(clickCooldown, Enum.EasingStyle.Linear, Enum.EasingDirection.Out),
        {Size = UDim2.new(0, 0, 1, 0)}
    )
    
    cooldownTween:Play()
    cooldownTween.Completed:Connect(function()
        cooldownOverlay.Visible = false
    end)
end)

-- Hover effects
ghostJabButton.MouseEnter:Connect(function()
    local hoverTween = TweenService:Create(
        ghostJabButton,
        TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
        {BackgroundColor3 = Color3.fromRGB(50, 50, 80)}
    )
    hoverTween:Play()
end)

ghostJabButton.MouseLeave:Connect(function()
    local leaveTween = TweenService:Create(
        ghostJabButton,
        TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
        {BackgroundColor3 = Color3.fromRGB(40, 40, 60)}
    )
    leaveTween:Play()
end)
